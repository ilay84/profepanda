<!-- templates/admin/articles_new.html -->
{% extends "base.html" %}
{% block title %}{{ t('Nuevo artículo', 'New Article', app_lang) }}{% endblock %}
{% block admin_nav %}{% include "_admin_bar.html" %}{% endblock %}

{% block head %}
  <style>
    :root { --ppx-editor-max: 1720px; }
    .ppx-form-stack { display:flex; flex-direction:column; gap:4px; align-items:stretch; }
    /* Make every card use the full admin container width */
    .ppx-form-stack > .ppx-card { width:100%; max-width: none; margin: 0; }
    .ppx-form-stack form { width:100%; max-width:none; }
    .ppx-form-stack .ppx-field, .ppx-form-stack .ppx-row { width:100%; max-width:none; }
    .ppx-form-stack .ppx-field { margin-bottom:.5rem; }
    .ppx-form-stack .ppx-row { gap:.5rem; }
  </style>
{% endblock %}

{% block content %}
  <div class="ppx-row" style="justify-content:flex-end;margin-bottom:.5rem;">
    <a class="ppx-btn ppx-btn--subtle" href="{{ url_for('admin.admin_articles_index') }}">{{ t('Volver a Artículos', 'Back to Articles', app_lang) }}</a>
  </div>
  <div class="ppx-form-stack">
    <div class="ppx-card ppx-card--pad">
        <h1 class="ppx-h1" style="margin:0 0 .75rem 0;">{{ t('Nuevo artículo', 'New Article', app_lang) }}</h1>

        <form method="post" action="{{ url_for('admin.admin_articles_create') }}" class="ppx-stack-md" enctype="multipart/form-data">
          <div class="ppx-field">
            <label class="ppx-label" for="title">{{ t('Título / Title', 'Title', app_lang) }}</label>
            <input class="ppx-input" id="title" name="title" placeholder="Hola, mundo / Hello, World">
            <div class="ppx-help">{{ t('Usaremos esto para generar el slug.', "We'll use this to generate the slug.", app_lang) }}</div>
          </div>

          <div class="ppx-field">
            <label class="ppx-label" for="html">HTML</label>
            <textarea class="ppx-textarea" id="html" name="html" placeholder="<p>Contenido.</p>"></textarea>
            <div class="ppx-help">
              {{ t('Un solo cuerpo HTML por ahora. Los idiomas se agregarán como versiones adjuntas más adelante.',
                   'Single HTML body for now. Language versions will be attached later.', app_lang) }}
            </div>
          </div>

          <div class="ppx-row" style="justify-content:flex-start;gap:.5rem;flex-wrap:wrap;">
            <button class="ppx-btn ppx-btn--primary" type="submit">{{ t('Guardar', 'Save', app_lang) }}</button>
            <a class="ppx-btn ppx-btn--subtle" href="{{ url_for('admin.admin_articles_index') }}">{{ t('Cancelar', 'Cancel', app_lang) }}</a>
          </div>
        </form>
    </div>

    {% include "admin/_article_summary_image.html" %}
    {% include "admin/_article_taxonomy.html" %}
  </div>

  <!-- Quill CSS/JS + admin init -->
  <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>
  <script src="{{ url_for('static', filename='js/admin_quill.js') }}"></script>
  {# taxonomy picker is loaded inside _article_taxonomy.html #}

{% endblock %}
